{% extends "profile_user.html" %}

{% block title %}
–î–∞–Ω—Å-–æ—Ç—á–µ—Ç: –í–∞—à–∞ —Ç–∞–Ω—Ü–µ–≤–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è
{% endblock %}

{% block content %}
<h1>üéâ –í–∞—à –î–∞–Ω—Å-–æ—Ç—á–µ—Ç! üéâ</h1>
<p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –æ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏!</p>

<div id="dashboard">
    <div class="chart-container">
        <canvas id="attendanceChart"></canvas>
        <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª–∏!</p>
    </div>

    <div class="summary">
        <h2>–ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä:</h2>
        <p>–í—ã –ø–æ—Å–µ—Ç–∏–ª–∏ <span class="highlight">{{ attendance_data.attended }}</span> –∑–∞–Ω—è—Ç–∏–π –∏ –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏ <span class="highlight">{{ attendance_data.missed }}</span>.</p>

        <h3>–í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</h3>
        <ul>
            {% if student_achievements %}
                {% for achievement in student_achievements %}
                    <li><strong>{{ achievement.achievement.name }}</strong> - {{ achievement.achievement.description }}</li>
                {% endfor %}
            {% else %}
                <li>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ö–æ–¥–∏—Ç—å –Ω–∞ –∑–∞–Ω—è—Ç–∏—è, –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω–µ –∑–∞—Å—Ç–∞–≤—è—Ç —Å–µ–±—è –∂–¥–∞—Ç—å!</li>
            {% endif %}
        </ul>
    </div>

    <div class="tips">
        <h2>–°–æ–≤–µ—Ç—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏:</h2>
        <ul>
            <li>–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –¥–æ–º–∞!</li>
            <li>–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Å–≤–æ–µ –≤—Ä–µ–º—è —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∑–∞–Ω—è—Ç–∏—è.</li>
            <li>–ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –≤–∞—à–∏–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º!</li>
        </ul>
    </div>
</div>

<style>
    #dashboard {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        margin: 20px;
        font-family: 'Arial', sans-serif;
    }

    .chart-container {
        flex: 1 1 40%;
        margin-right: 20px;
        margin-bottom: 20px;
        position: relative;
        padding: 20px;
        background: #ffffff;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .summary, .tips {
        flex: 1 1 30%;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 8px;
        background: #f0f8ff;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .highlight {
        color: #ff4500;
        font-weight: bold;
    }

    .status {
        font-weight: bold;
        color: green;
    }

    h2 {
        border-bottom: 2px solid #ff4500;
        padding-bottom: 5px;
    }

    ul {
        list-style-type: disc;
        padding-left: 20px;
    }

    li {
        margin-bottom: 10px;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('attendanceChart').getContext('2d');
    const attendanceChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['–ü–æ—Å–µ—â–µ–Ω–Ω—ã–µ', '–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ'],
            datasets: [{
                label: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–Ω—è—Ç–∏–π',
                data: [{{ attendance_data.attended }}, {{ attendance_data.missed }}],
                backgroundColor: ['#4CAF50', '#FF6384'],
                hoverOffset: 4
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'top',
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            label += context.raw;
                            return label;
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–Ω—è—Ç–∏–π'
                    }
                }
            }
        }
    });
</script>
{% endblock %}
